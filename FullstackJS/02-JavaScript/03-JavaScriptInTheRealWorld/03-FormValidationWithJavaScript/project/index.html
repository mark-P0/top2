<!DOCTYPE html>
<html lang="en" class="bg-secondary vw-100 vh-100 d-flex flex-center p-3">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap-reboot.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap-utilities.min.css"
    />

    <script type="module" src="script.js"></script>
    <script type="module" src="country-list.js"></script>

    <script>
      console.clear();
    </script>
    <style>
      form {
        max-width: 48rem;
      }

      .flex-center {
        justify-content: center;
        align-items: center;
      }
      .flex-maximize > * {
        flex: 1;
      }

      .fs-small {
        font-size: small;
      }
      .fs-xs {
        font-size: x-small;
      }

      input.has-been-validated:invalid {
        background-color: rgb(var(--bs-danger-rgb));
      }

      * {
        /*  Prevent flex children from growing their containers
         *  https://stackoverflow.com/questions/45813304/text-overflow-ellipsis-on-flex-child-not-working
         *  https://css-tricks.com/flexbox-truncated-text/
         */
        min-width: 0;
        min-height: 0;
      }
    </style>

    <title>JS Form Validation</title>
  </head>

  <body class="rounded text-bg-dark p-4">
    <h1 class="my-3">Form Validation with JavaScript</h1>

    <form action="" method="post" novalidate class="d-flex flex-column">
      <p class="m-0 fs-small text-secondary">
        <em>
          Fields marked with
          <span class="text-danger fw-bold fst-normal">*</span>
          are required.
        </em>
      </p>

      <div class="my-3 d-flex flex-column gap-1">
        <label class="d-flex flex-column">
          <span class="text-truncate">
            <span class="text-danger fw-bold fst-normal">*</span>
            Email
          </span>
          <input type="email" name="email" required />
          <span class="text-danger fs-small text-truncate invisible">
            <!-- Will be filled in via JS -->
            &nbsp;
          </span>
        </label>

        <div class="d-flex flex-maximize gap-3">
          <label class="d-flex flex-column">
            <span class="text-truncate">
              <span class="text-danger fw-bold fst-normal">*</span>
              Country
            </span>
            <input type="text" name="country" list="country-list" required />
            <datalist id="country-list">
              <!-- To be populated via JS using an external country list -->
            </datalist>
            <span class="text-danger fs-small text-truncate invisible">
              <!-- Will be filled in via JS -->
              &nbsp;
            </span>
          </label>

          <label class="d-flex flex-column">
            <!--  Zip code sanity check pattern sourced from:
              --  https://stackoverflow.com/a/19844362/
              -->

            Zip Code
            <input
              type="text"
              name="zip"
              pattern="^[a-zA-Z0-9][a-zA-Z0-9\- ]{0,10}[a-zA-Z0-9]$"
              minlength="2"
              maxlength="12"
            />
            <span class="text-danger fs-small text-truncate invisible">
              <!-- Will be filled in via JS -->
              &nbsp;
            </span>
          </label>
        </div>

        <div class="d-flex flex-maximize gap-3">
          <!--  Password pattern from
            --  https://www.html5pattern.com/Passwords
            -->
          <label class="d-flex flex-column">
            <span class="text-truncate">
              <span class="text-danger fw-bold fst-normal">*</span>
              Password
            </span>
            <input
              type="password"
              name="password"
              pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$"
              minlength="8"
              required
            />
            <span class="text-danger fs-small text-truncate invisible">
              <!-- Will be filled in via JS -->
              &nbsp;
            </span>
          </label>
          <label class="d-flex flex-column">
            <span class="text-truncate">
              <span class="text-danger fw-bold fst-normal">*</span>
              Confirm Password
            </span>
            <input type="password" name="password-confirmation" required />
            <span class="text-danger fs-small text-truncate invisible">
              <!-- Will be filled in via JS -->
              &nbsp;
            </span>
          </label>
        </div>
      </div>

      <div class="d-flex flex-column">
        <button type="submit">Submit</button>
        <button type="reset">Clear</button>
      </div>
    </form>
  </body>
</html>
